/**
 * Cesium - https://github.com/AnalyticalGraphicsInc/cesium
 *
 * Copyright 2011-2015 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md for full licensing details.
 */
/*!
 * https://github.com/amd/rest3d/tree/master/server/o3dgc
 *
 * Copyright (c) 2013 Khaled Mammou - Advanced Micro Devices, Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

// Copyright (c) 2004 Amir Said (said@ieee.org) & William A. Pearlman (pearlw@ecse.rpi.edu)

!function(){define("ThirdParty/o3dgc",[],function(){"use strict";function t(){var t,e,r;return e=new ArrayBuffer(4),t=new Uint32Array(e),r=new Uint8Array(e),t[0]=1,1===r[0]?s.O3DGC_LITTLE_ENDIAN:s.O3DGC_BIG_ENDIAN}function e(t,e,r,i){var o,n,_,m,a,d,h;for(o=-1,n=!1,m=e.m_value,a=0,_=a;m>_;++_){if(t.Equal(r[_].m_id)){n=!0;break}if(t.Less(r[_].m_id)){for(e.m_value<s.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS&&++e.m_value,d=e.m_value-1;d>_;--d)for(r[d].m_id.m_a=r[d-1].m_id.m_a,r[d].m_id.m_b=r[d-1].m_id.m_b,r[d].m_id.m_c=r[d-1].m_id.m_c,h=0;i>h;++h)r[d].m_pred[h]=r[d-1].m_pred[h];r[_].m_id.m_a=t.m_a,r[_].m_id.m_b=t.m_b,r[_].m_id.m_c=t.m_c,o=_,n=!0;break}}return!n&&e.m_value<s.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS&&(o=e.m_value++,r[o].m_id.m_a=t.m_a,r[o].m_id.m_b=t.m_b,r[o].m_id.m_c=t.m_c),o}function r(t,e){var r,i,o;r=Math.abs(t.m_x),i=Math.abs(t.m_y),o=Math.abs(t.m_z),o>=r&&o>=i?t.m_z>=0?(e.m_z=0,e.m_x=t.m_x,e.m_y=t.m_y):(e.m_z=1,e.m_x=-t.m_x,e.m_y=-t.m_y):i>=r&&i>=o?t.m_y>=0?(e.m_z=2,e.m_x=t.m_z,e.m_y=t.m_x):(e.m_z=3,e.m_x=-t.m_z,e.m_y=-t.m_x):t.m_x>=0?(e.m_z=4,e.m_x=t.m_y,e.m_y=t.m_z):(e.m_z=5,e.m_x=-t.m_y,e.m_y=-t.m_z)}function i(t){return 0>t?-1-2*t:2*t}function o(t){return 1&t?-(t+1>>>1):t>>>1}function n(t,r,i,o,n,_,m,s){var d,h,u,c,C,l;for(l=new a.SC3DMCTriplet(-1,-1,-1),h=0;3>h;++h)if(c=t[3*r+h],i>c&&(l.m_a=-1,l.m_b=-1,l.m_c=c,u=e(l,o,n,_),-1!==u))for(d=c*s,C=0;_>C;++C)n[u].m_pred[C]=m[d+C]}function _(t,r,i,o,n,_,m,s,d,h){var u,c,C,l,A,f,p,S,D,I,T,y,O,G,M,N,E,R;if(u=3*r,R=new a.SC3DMCTriplet(-1,-1,-1),t[u]===i?(f=t[u+1],p=t[u+2]):t[u+1]===i?(f=t[u],p=t[u+2]):(f=t[u],p=t[u+1]),i>f&&i>p)for(y=d.Begin(f),O=d.End(f),G=y;O>G&&(M=h[G],!(0>M));++G){for(c=3*M,S=-1,N=!1,T=0;3>T;++T)D=t[c+T],D===p?N=!0:i>D&&D!==f&&(S=D);if(-1!==S&&N&&(p>f?(R.m_a=f,R.m_b=p):(R.m_a=p,R.m_b=f),R.m_c=-S-1,E=e(R,o,n,_),-1!==E))for(C=f*s,l=p*s,A=S*s,I=0;_>I;++I)n[E].m_pred[I]=m[C+I]+m[l+I]-m[A+I]}}function m(t,e,r,i,o){var n,_,m,s,d,h,u,c,C,l;for(l=new a.Vec3,c=new a.Vec3,C=new a.Vec3,m=3*i,_=0;m>_;++_)o[_]=0;for(s=0;e>s;++s)n=3*s,d=3*t[n],h=3*t[n+1],u=3*t[n+2],c.m_x=r[h]-r[d],c.m_y=r[h+1]-r[d+1],c.m_z=r[h+2]-r[d+2],C.m_x=r[u]-r[d],C.m_y=r[u+1]-r[d+1],C.m_z=r[u+2]-r[d+2],l.m_x=c.m_y*C.m_z-c.m_z*C.m_y,l.m_y=c.m_z*C.m_x-c.m_x*C.m_z,l.m_z=c.m_x*C.m_y-c.m_y*C.m_x,o[d]+=l.m_x,o[d+1]+=l.m_y,o[d+2]+=l.m_z,o[h]+=l.m_x,o[h+1]+=l.m_y,o[h+2]+=l.m_z,o[u]+=l.m_x,o[u+1]+=l.m_y,o[u+2]+=l.m_z}var a,s;a={},s={},s.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL0=7,s.O3DGC_BINARY_STREAM_MAX_SYMBOL0=127,s.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL1=6,s.O3DGC_BINARY_STREAM_MAX_SYMBOL1=63,s.O3DGC_BINARY_STREAM_NUM_SYMBOLS_UINT32=5,s.O3DGC_BIG_ENDIAN=0,s.O3DGC_LITTLE_ENDIAN=1,s.O3DGC_MAX_DOUBLE=1.79769e308,s.O3DGC_MIN_LONG=-2147483647,s.O3DGC_MAX_LONG=2147483647,s.O3DGC_MAX_UCHAR8=255,s.O3DGC_MAX_TFAN_SIZE=256,s.O3DGC_MAX_ULONG=4294967295,s.O3DGC_SC3DMC_START_CODE=497,s.O3DGC_DV_START_CODE=498,s.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES=256,s.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES=256,s.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES=32,s.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS=2,s.O3DGC_SC3DMC_BINARIZATION_FL=0,s.O3DGC_SC3DMC_BINARIZATION_BP=1,s.O3DGC_SC3DMC_BINARIZATION_FC=2,s.O3DGC_SC3DMC_BINARIZATION_AC=3,s.O3DGC_SC3DMC_BINARIZATION_AC_EGC=4,s.O3DGC_SC3DMC_BINARIZATION_ASCII=5,s.O3DGC_STREAM_TYPE_UNKOWN=0,s.O3DGC_STREAM_TYPE_ASCII=1,s.O3DGC_STREAM_TYPE_BINARY=2,s.O3DGC_SC3DMC_NO_PREDICTION=0,s.O3DGC_SC3DMC_DIFFERENTIAL_PREDICTION=1,s.O3DGC_SC3DMC_XOR_PREDICTION=2,s.O3DGC_SC3DMC_ADAPTIVE_DIFFERENTIAL_PREDICTION=3,s.O3DGC_SC3DMC_CIRCULAR_DIFFERENTIAL_PREDICTION=4,s.O3DGC_SC3DMC_PARALLELOGRAM_PREDICTION=5,s.O3DGC_SC3DMC_SURF_NORMALS_PREDICTION=6,s.O3DGC_SC3DMC_ENCODE_MODE_QBCR=0,s.O3DGC_SC3DMC_ENCODE_MODE_SVA=1,s.O3DGC_SC3DMC_ENCODE_MODE_TFAN=2,s.O3DGC_DYNAMIC_VECTOR_ENCODE_MODE_LIFT=0,s.O3DGC_MIN_NEIGHBORS_SIZE=128,s.O3DGC_MIN_NUM_NEIGHBORS_SIZE=16,s.O3DGC_TFANS_MIN_SIZE_ALLOCATED_VERTICES_BUFFER=128,s.O3DGC_TFANS_MIN_SIZE_TFAN_SIZE_BUFFER=8,s.O3DGC_DEFAULT_VECTOR_SIZE=32,a.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_UNKOWN=0,a.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_POSITION=1,a.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_NORMAL=2,a.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_COLOR=3,a.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_TEXCOORD=4,a.O3DGC_IFS_FLOAT_ATTRIBUTE_TYPE_WEIGHT=5,a.O3DGC_IFS_INT_ATTRIBUTE_TYPE_UNKOWN=0,a.O3DGC_IFS_INT_ATTRIBUTE_TYPE_INDEX=1,a.O3DGC_IFS_INT_ATTRIBUTE_TYPE_JOINT_ID=2,a.O3DGC_IFS_INT_ATTRIBUTE_TYPE_INDEX_BUFFER_ID=3,a.O3DGC_OK=0,a.O3DGC_ERROR_BUFFER_FULL=1,a.O3DGC_ERROR_CORRUPTED_STREAM=5,a.O3DGC_ERROR_NON_SUPPORTED_FEATURE=6,a.O3DGC_ERROR_AC=7,a.SC3DMCStats=function(){this.m_timeCoord=0,this.m_timeNormal=0,this.m_timeCoordIndex=0,this.m_timeFloatAttribute=new Float32Array(s.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES),this.m_timeIntAttribute=new Float32Array(s.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES),this.m_timeReorder=0,this.m_streamSizeCoord=0,this.m_streamSizeNormal=0,this.m_streamSizeCoordIndex=0,this.m_streamSizeFloatAttribute=new Uint32Array(s.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES),this.m_streamSizeIntAttribute=new Uint32Array(s.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES)},a.SC3DMCTriplet=function(t,e,r){this.m_a=t,this.m_b=e,this.m_c=r},a.SC3DMCTriplet.prototype.Less=function(t){var e;return e=this.m_c!==t.m_c?this.m_c<t.m_c:this.m_b!==t.m_b?this.m_b<t.m_b:this.m_a<t.m_a},a.SC3DMCTriplet.prototype.Equal=function(t){return this.m_c===t.m_c&&this.m_b===t.m_b&&this.m_a===t.m_a},a.SC3DMCPredictor=function(){this.m_id=new a.SC3DMCTriplet(-1,-1,-1),this.m_pred=new Float32Array(s.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES)};var d=function(){if("undefined"!=typeof performance&&"undefined"!=typeof performance.now)return function(){return performance.now()};var t=Date.now();return function(){return Date.now()-t}}();return a.Timer=function(){this.m_start=0,this.m_end=0},a.Timer.prototype.Tic=function(){this.m_start=d()},a.Timer.prototype.Toc=function(){this.m_end=d()},a.Timer.prototype.GetElapsedTime=function(){return this.m_end-this.m_start},a.Vec3=function(t,e,r){this.m_x=t,this.m_y=e,this.m_z=r},a.Vec3.prototype.Set=function(t,e,r){this.m_x=t,this.m_y=e,this.m_z=r},a.Vec3.prototype.Sub=function(t,e){this.m_x=t.m_x-e.m_x,this.m_y=t.m_y-e.m_y,this.m_z=t.m_z-e.m_z},a.Vec3.prototype.Add=function(t,e){this.m_x=t.m_x+e.m_x,this.m_y=t.m_y+e.m_y,this.m_z=t.m_z+e.m_z},a.Vec3.prototype.SelfAdd=function(t){this.m_x+=t.m_x,this.m_y+=t.m_y,this.m_z+=t.m_z},a.Vec3.prototype.Cross=function(t,e){this.m_x=t.m_y*e.m_z-t.m_z*e.m_y,this.m_y=t.m_z*e.m_x-t.m_x*e.m_z,this.m_z=t.m_x*e.m_y-t.m_y*e.m_x},a.Vec3.prototype.GetNorm=function(){return Math.sqrt(this.m_x*this.m_x+this.m_y*this.m_y+this.m_z*this.m_z)},s.CubeToSphere={0:function(t,e){e.m_x=t.m_x,e.m_y=t.m_y,e.m_z=Math.sqrt(Math.max(0,1-e.m_x*e.m_x-e.m_y*e.m_y))},1:function(t,e){e.m_x=-t.m_x,e.m_y=-t.m_y,e.m_z=-Math.sqrt(Math.max(0,1-e.m_x*e.m_x-e.m_y*e.m_y))},2:function(t,e){e.m_z=t.m_x,e.m_x=t.m_y,e.m_y=Math.sqrt(Math.max(0,1-e.m_x*e.m_x-e.m_z*e.m_z))},3:function(t,e){e.m_z=-t.m_x,e.m_x=-t.m_y,e.m_y=-Math.sqrt(Math.max(0,1-e.m_x*e.m_x-e.m_z*e.m_z))},4:function(t,e){e.m_y=t.m_x,e.m_z=t.m_y,e.m_x=Math.sqrt(Math.max(0,1-e.m_y*e.m_y-e.m_z*e.m_z))},5:function(t,e){e.m_y=-t.m_x,e.m_z=-t.m_y,e.m_x=-Math.sqrt(Math.max(0,1-e.m_y*e.m_y-e.m_z*e.m_z))}},a.Iterator=function(){this.m_count=0},a.NumberRef=function(){this.m_value=0},a.BinaryStream=function(e){this.m_endianness=t(),this.m_buffer=e,this.m_stream=new Uint8Array(this.m_buffer),this.m_localBuffer=new ArrayBuffer(4),this.m_localBufferViewUChar8=new Uint8Array(this.m_localBuffer),this.m_localBufferViewFloat32=new Float32Array(this.m_localBuffer),this.m_localBufferViewUInt32=new Uint32Array(this.m_localBuffer)},a.BinaryStream.prototype.ReadFloat32Bin=function(t){return this.m_endianness===s.O3DGC_BIG_ENDIAN?(this.m_localBufferViewUChar8[3]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[2]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[1]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[0]=this.m_stream[t.m_count++]):(this.m_localBufferViewUChar8[0]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[1]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[2]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[3]=this.m_stream[t.m_count++]),this.m_localBufferViewFloat32[0]},a.BinaryStream.prototype.ReadUInt32Bin=function(t){return this.m_endianness===s.O3DGC_BIG_ENDIAN?(this.m_localBufferViewUChar8[3]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[2]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[1]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[0]=this.m_stream[t.m_count++]):(this.m_localBufferViewUChar8[0]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[1]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[2]=this.m_stream[t.m_count++],this.m_localBufferViewUChar8[3]=this.m_stream[t.m_count++]),this.m_localBufferViewUInt32[0]},a.BinaryStream.prototype.ReadUChar8Bin=function(t){return this.m_stream[t.m_count++]},a.BinaryStream.prototype.ReadUInt32ASCII=function(t){var e,r,i;for(e=0,r=0,i=0;i<s.O3DGC_BINARY_STREAM_NUM_SYMBOLS_UINT32;++i)e+=this.m_stream[t.m_count++]<<r>>>0,r+=s.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL0;return e},a.BinaryStream.prototype.ReadFloat32ASCII=function(t){var e=this.ReadUInt32ASCII(t);return this.m_endianness===s.O3DGC_BIG_ENDIAN?(this.m_localBufferViewUChar8[3]=e&s.O3DGC_MAX_UCHAR8,e>>>=8,this.m_localBufferViewUChar8[2]=e&s.O3DGC_MAX_UCHAR8,e>>>=8,this.m_localBufferViewUChar8[1]=e&s.O3DGC_MAX_UCHAR8,e>>>=8,this.m_localBufferViewUChar8[0]=e&s.O3DGC_MAX_UCHAR8):(this.m_localBufferViewUChar8[0]=e&s.O3DGC_MAX_UCHAR8,e>>>=8,this.m_localBufferViewUChar8[1]=e&s.O3DGC_MAX_UCHAR8,e>>>=8,this.m_localBufferViewUChar8[2]=e&s.O3DGC_MAX_UCHAR8,e>>>=8,this.m_localBufferViewUChar8[3]=e&s.O3DGC_MAX_UCHAR8),this.m_localBufferViewFloat32[0]},a.BinaryStream.prototype.ReadIntASCII=function(t){return o(this.ReadUIntASCII(t))},a.BinaryStream.prototype.ReadUIntASCII=function(t){var e,r,i;if(i=this.m_stream[t.m_count++],i===s.O3DGC_BINARY_STREAM_MAX_SYMBOL0){e=0;do r=this.m_stream[t.m_count++],i+=r>>>1<<e>>>0,e+=s.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL1;while(1&r)}return i},a.BinaryStream.prototype.ReadUCharASCII=function(t){return this.m_stream[t.m_count++]},a.BinaryStream.prototype.ReadFloat32=function(t,e){return e===s.O3DGC_STREAM_TYPE_ASCII?this.ReadFloat32ASCII(t):this.ReadFloat32Bin(t)},a.BinaryStream.prototype.ReadUInt32=function(t,e){return e===s.O3DGC_STREAM_TYPE_ASCII?this.ReadUInt32ASCII(t):this.ReadUInt32Bin(t)},a.BinaryStream.prototype.ReadUChar=function(t,e){return e===s.O3DGC_STREAM_TYPE_ASCII?this.ReadUCharASCII(t):this.ReadUChar8Bin(t)},a.BinaryStream.prototype.GetBuffer=function(t,e){return new Uint8Array(this.m_buffer,t.m_count,e)},s.O3DGC_AC_MIN_LENGTH=16777216,s.O3DGC_AC_MAX_LENGTH=4294967295,s.O3DGC_AC_BM_LENGTH_SHIFT=13,s.O3DGC_AC_BM_MAX_COUNT=1<<s.O3DGC_AC_BM_LENGTH_SHIFT>>>0,s.O3DGC_AC_DM_LENGTH_SHIFT=15,s.O3DGC_AC_DM_MAX_COUNT=1<<s.O3DGC_AC_DM_LENGTH_SHIFT>>>0,a.StaticBitModel=function(){this.m_bit0Prob=1<<s.O3DGC_AC_BM_LENGTH_SHIFT-1>>>0},a.StaticBitModel.prototype.SetProbability=function(t){this.m_bit0Prob=Math.floor(t*(1<<s.O3DGC_AC_BM_LENGTH_SHIFT>>>0))},a.AdaptiveBitModel=function(){this.m_updateCycle=4,this.m_bitsUntilUpdate=4,this.m_bit0Prob=1<<s.O3DGC_AC_BM_LENGTH_SHIFT-1>>>0,this.m_bit0Count=1,this.m_bitCount=2},a.AdaptiveBitModel.prototype.Reset=function(){this.m_updateCycle=4,this.m_bitsUntilUpdate=4,this.m_bit0Prob=1<<s.O3DGC_AC_BM_LENGTH_SHIFT-1>>>0,this.m_bit0Count=1,this.m_bitCount=2},a.AdaptiveBitModel.prototype.Update=function(){(this.m_bitCount+=this.m_updateCycle)>s.O3DGC_AC_BM_MAX_COUNT&&(this.m_bitCount=this.m_bitCount+1>>>1,this.m_bit0Count=this.m_bit0Count+1>>>1,this.m_bit0Count===this.m_bitCount&&++this.m_bitCount);var t=Math.floor(2147483648/this.m_bitCount);this.m_bit0Prob=this.m_bit0Count*t>>>31-s.O3DGC_AC_BM_LENGTH_SHIFT,this.m_updateCycle=5*this.m_updateCycle>>>2,this.m_updateCycle>64&&(this.m_updateCycle=64),this.m_bitsUntilUpdate=this.m_updateCycle},a.AdaptiveDataModel=function(){this.m_buffer={},this.m_distribution={},this.m_symbolCount={},this.m_decoderTable={},this.m_totalCount=0,this.m_updateCycle=0,this.m_symbolsUntilUpdate=0,this.m_dataSymbols=0,this.m_lastSymbol=0,this.m_tableSize=0,this.m_tableShift=0},a.AdaptiveDataModel.prototype.Update=function(){var t,e,r,i,o,n,_;if((this.m_totalCount+=this.m_updateCycle)>s.O3DGC_AC_DM_MAX_COUNT)for(this.m_totalCount=0,t=0;t<this.m_dataSymbols;++t)this.m_totalCount+=this.m_symbolCount[t]=this.m_symbolCount[t]+1>>>1;if(e=0,r=0,i=Math.floor(2147483648/this.m_totalCount),0===this.m_tableSize)for(o=0;o<this.m_dataSymbols;++o)this.m_distribution[o]=i*e>>>31-s.O3DGC_AC_DM_LENGTH_SHIFT,e+=this.m_symbolCount[o];else{for(o=0;o<this.m_dataSymbols;++o)for(this.m_distribution[o]=i*e>>>31-s.O3DGC_AC_DM_LENGTH_SHIFT,e+=this.m_symbolCount[o],_=this.m_distribution[o]>>>this.m_tableShift;_>r;)this.m_decoderTable[++r]=o-1;for(this.m_decoderTable[0]=0;r<=this.m_tableSize;)this.m_decoderTable[++r]=this.m_dataSymbols-1}this.m_updateCycle=5*this.m_updateCycle>>>2,n=this.m_dataSymbols+6<<3>>>0,this.m_updateCycle>n&&(this.m_updateCycle=n),this.m_symbolsUntilUpdate=this.m_updateCycle},a.AdaptiveDataModel.prototype.Reset=function(){var t;if(0!==this.m_dataSymbols){for(this.m_totalCount=0,this.m_updateCycle=this.m_dataSymbols,t=0;t<this.m_dataSymbols;++t)this.m_symbolCount[t]=1;this.Update(),this.m_symbolsUntilUpdate=this.m_updateCycle=this.m_dataSymbols+6>>>1}},a.AdaptiveDataModel.prototype.SetAlphabet=function(t){if(2>t||t>2048)return Console.log("invalid number of data symbols"),a.O3DGC_ERROR_AC;if(this.m_dataSymbols!==t)if(this.m_dataSymbols=t,this.m_lastSymbol=this.m_dataSymbols-1,this.m_dataSymbols>16){for(var e=3;this.m_dataSymbols>1<<e+2>>>0;)++e;this.m_tableSize=1<<e>>>0,this.m_tableShift=s.O3DGC_AC_DM_LENGTH_SHIFT-e,this.m_buffer=new ArrayBuffer(4*(2*this.m_dataSymbols+this.m_tableSize+2)),this.m_distribution=new Uint32Array(this.m_buffer,0,this.m_dataSymbols),this.m_symbolCount=new Uint32Array(this.m_buffer,4*this.m_dataSymbols,this.m_dataSymbols),this.m_decoderTable=new Uint32Array(this.m_buffer,8*this.m_dataSymbols,this.m_tableSize+2)}else this.m_tableSize=this.m_tableShift=0,this.m_buffer=new ArrayBuffer(8*this.m_dataSymbols),this.m_distribution=new Uint32Array(this.m_buffer,0,this.m_dataSymbols),this.m_symbolCount=new Uint32Array(this.m_buffer,4*this.m_dataSymbols,this.m_dataSymbols),this.m_decoderTable={};return this.Reset(),a.O3DGC_OK},a.ArithmeticDecoder=function(){this.m_codeBuffer={},this.m_acShift=0,this.m_base=0,this.m_value=0,this.m_length=0,this.m_bufferSize=0,this.m_mode=0},a.ArithmeticDecoder.prototype.SetBuffer=function(t,e){return 0===t?(Console.log("invalid codec buffer size"),a.O3DGC_ERROR_AC):0!==this.m_mode?(Console.log("cannot set buffer while encoding or decoding"),a.O3DGC_ERROR_AC):(this.m_bufferSize=t,this.m_codeBuffer=e,void 0)},a.ArithmeticDecoder.prototype.StartDecoder=function(){return 0!==this.m_mode?(Console.log("cannot start decoder"),a.O3DGC_ERROR_AC):0===this.m_bufferSize?(Console.log("no code buffer set"),a.O3DGC_ERROR_AC):(this.m_mode=2,this.m_length=s.O3DGC_AC_MAX_LENGTH,this.m_acShift=3,this.m_value=(this.m_codeBuffer[0]<<24|this.m_codeBuffer[1]<<16|this.m_codeBuffer[2]<<8|this.m_codeBuffer[3])>>>0,void 0)},a.ArithmeticDecoder.prototype.StopDecoder=function(){return 2!==this.m_mode?(Console.log("invalid to stop decoder"),a.O3DGC_ERROR_AC):(this.m_mode=0,void 0)},a.ArithmeticDecoder.prototype.GetBit=function(){this.m_length>>>=1;var t=this.m_value>=this.m_length;return t&&(this.m_value-=this.m_length),this.m_length<s.O3DGC_AC_MIN_LENGTH&&this.RenormDecInterval(),t},a.ArithmeticDecoder.prototype.GetBits=function(t){var e=Math.floor(this.m_value/(this.m_length>>>=t));return this.m_value-=this.m_length*e,this.m_length<s.O3DGC_AC_MIN_LENGTH&&this.RenormDecInterval(),e},a.ArithmeticDecoder.prototype.DecodeStaticBitModel=function(t){var e,r;return e=t.m_bit0Prob*(this.m_length>>>s.O3DGC_AC_BM_LENGTH_SHIFT),r=this.m_value>=e,r?(this.m_value-=e,this.m_length-=e):this.m_length=e,this.m_length<s.O3DGC_AC_MIN_LENGTH&&this.RenormDecInterval(),r},a.ArithmeticDecoder.prototype.DecodeAdaptiveBitModel=function(t){var e,r;return e=t.m_bit0Prob*(this.m_length>>>s.O3DGC_AC_BM_LENGTH_SHIFT),r=this.m_value>=e,r?(this.m_value-=e,this.m_length-=e):(this.m_length=e,++t.m_bit0Count),this.m_length<s.O3DGC_AC_MIN_LENGTH&&this.RenormDecInterval(),0===--t.m_bitsUntilUpdate&&t.Update(),r},a.ArithmeticDecoder.prototype.DecodeAdaptiveDataModel=function(t){var e,r,i,o,n,_,m,a;if(o=this.m_length,t.m_tableSize>0){for(_=Math.floor(this.m_value/(this.m_length>>>=s.O3DGC_AC_DM_LENGTH_SHIFT)),n=_>>>t.m_tableShift,r=t.m_decoderTable[n],e=t.m_decoderTable[n+1]+1;e>r+1;)a=r+e>>>1,t.m_distribution[a]>_?e=a:r=a;i=t.m_distribution[r]*this.m_length,r!==t.m_lastSymbol&&(o=t.m_distribution[r+1]*this.m_length)}else{i=r=0,this.m_length>>>=s.O3DGC_AC_DM_LENGTH_SHIFT,a=(e=t.m_dataSymbols)>>>1;do m=this.m_length*t.m_distribution[a],m>this.m_value?(e=a,o=m):(r=a,i=m);while((a=r+e>>>1)!==r)}return this.m_value-=i,this.m_length=o-i,this.m_length<s.O3DGC_AC_MIN_LENGTH&&this.RenormDecInterval(),++t.m_symbolCount[r],0===--t.m_symbolsUntilUpdate&&t.Update(!1),r},a.ArithmeticDecoder.prototype.ExpGolombDecode=function(t,e,r){var i,o,n;i=0,o=0;do n=this.DecodeAdaptiveBitModel(r),n&&(i+=1<<t>>>0,t++);while(n);for(;t--;)this.DecodeStaticBitModel(e)&&(o=(o|1<<t)>>>0);return i+o},a.ArithmeticDecoder.prototype.RenormDecInterval=function(){do this.m_value=(this.m_value<<8|this.m_codeBuffer[++this.m_acShift])>>>0,this.m_length=this.m_length<<8>>>0;while(this.m_length<s.O3DGC_AC_MIN_LENGTH)},a.ArithmeticDecoder.prototype.DecodeIntACEGC=function(t,e,r,i,n){var _=this.DecodeAdaptiveDataModel(t);return _===n&&(_+=this.ExpGolombDecode(i,e,r)),o(_)},a.ArithmeticDecoder.prototype.DecodeUIntACEGC=function(t,e,r,i,o){var n=this.DecodeAdaptiveDataModel(t);return n===o&&(n+=this.ExpGolombDecode(i,e,r)),n},a.FIFO=function(){this.m_data={},this.m_allocated=0,this.m_size=0,this.m_start=0,this.m_end=0},a.FIFO.prototype.Clear=function(){this.m_start=this.m_end=this.m_size=0},a.FIFO.prototype.GetAllocatedSize=function(){return this.m_allocated},a.FIFO.prototype.GetSize=function(){return this.m_size},a.FIFO.prototype.Allocate=function(t){return t>this.m_allocated&&(this.m_allocated=t,this.m_data=new Int32Array(this.m_allocated)),this.Clear(),a.O3DGC_OK},a.FIFO.prototype.PopFirst=function(){--this.m_size;var t=this.m_start++;return this.m_start===this.m_allocated&&(this.m_end=0),this.m_data[t]},a.FIFO.prototype.PushBack=function(t){--this.m_size,this.m_data[this.m_end]=t,++this.m_size,++this.m_end,this.m_end===this.m_allocated&&(this.m_end=0)},a.IndexedFaceSet=function(){this.m_nCoordIndex=0,this.m_nCoord=0,this.m_nNormal=0,this.m_numFloatAttributes=0,this.m_numIntAttributes=0,this.m_creaseAngle=30,this.m_ccw=!0,this.m_solid=!0,this.m_convex=!0,this.m_isTriangularMesh=!0,this.m_coordMin=new Float32Array(3),this.m_coordMax=new Float32Array(3),this.m_normalMin=new Float32Array(3),this.m_normalMax=new Float32Array(3),this.m_nFloatAttribute=new Uint32Array(s.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES),this.m_nIntAttribute=new Uint32Array(s.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES),this.m_dimFloatAttribute=new Uint32Array(s.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES),this.m_dimIntAttribute=new Uint32Array(s.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES),this.m_typeFloatAttribute=new Uint32Array(s.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES),this.m_typeIntAttribute=new Uint32Array(s.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES),this.m_minFloatAttributeBuffer=new ArrayBuffer(4*s.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES*s.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES),this.m_minFloatAttribute=new Float32Array(this.m_minFloatAttributeBuffer),this.m_maxFloatAttributeBuffer=new ArrayBuffer(4*s.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES*s.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES),this.m_maxFloatAttribute=new Float32Array(this.m_maxFloatAttributeBuffer),this.m_coordIndex={},this.m_coord={},this.m_normal={},this.m_floatAttribute=[],this.m_intAttribute=[]},a.IndexedFaceSet.prototype.GetNCoordIndex=function(){return this.m_nCoordIndex},a.IndexedFaceSet.prototype.GetNCoordIndex=function(){return this.m_nCoordIndex},a.IndexedFaceSet.prototype.GetNCoord=function(){return this.m_nCoord},a.IndexedFaceSet.prototype.GetNNormal=function(){return this.m_nNormal},a.IndexedFaceSet.prototype.GetNFloatAttribute=function(t){return this.m_nFloatAttribute[t]},a.IndexedFaceSet.prototype.GetNIntAttribute=function(t){return this.m_nIntAttribute[t]},a.IndexedFaceSet.prototype.GetNumFloatAttributes=function(){return this.m_numFloatAttributes},a.IndexedFaceSet.prototype.GetNumIntAttributes=function(){return this.m_numIntAttributes},a.IndexedFaceSet.prototype.GetCoordMinArray=function(){return this.m_coordMin},a.IndexedFaceSet.prototype.GetCoordMaxArray=function(){return this.m_coordMax},a.IndexedFaceSet.prototype.GetNormalMinArray=function(){return this.m_normalMin},a.IndexedFaceSet.prototype.GetNormalMaxArray=function(){return this.m_normalMax},a.IndexedFaceSet.prototype.GetFloatAttributeMinArray=function(t){return new Float32Array(this.m_minFloatAttributeBuffer,4*t*s.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES,this.GetFloatAttributeDim(t))},a.IndexedFaceSet.prototype.GetFloatAttributeMaxArray=function(t){return new Float32Array(this.m_maxFloatAttributeBuffer,4*t*s.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES,this.GetFloatAttributeDim(t))},a.IndexedFaceSet.prototype.GetFloatAttributeDim=function(t){return this.m_dimFloatAttribute[t]},a.IndexedFaceSet.prototype.GetIntAttributeDim=function(t){return this.m_dimIntAttribute[t]},a.IndexedFaceSet.prototype.GetFloatAttributeType=function(t){return this.m_typeFloatAttribute[t]},a.IndexedFaceSet.prototype.GetIntAttributeType=function(t){return this.m_typeIntAttribute[t]},a.IndexedFaceSet.prototype.GetFloatAttributeMax=function(t,e){return this.m_maxFloatAttribute[t*s.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES+e]},a.IndexedFaceSet.prototype.GetCreaseAngle=function(){return this.m_creaseAngle},a.IndexedFaceSet.prototype.GetCreaseAngle=function(){return this.m_creaseAngle},a.IndexedFaceSet.prototype.GetCCW=function(){return this.m_ccw},a.IndexedFaceSet.prototype.GetSolid=function(){return this.m_solid},a.IndexedFaceSet.prototype.GetConvex=function(){return this.m_convex},a.IndexedFaceSet.prototype.GetIsTriangularMesh=function(){return this.m_isTriangularMesh},a.IndexedFaceSet.prototype.GetCoordIndex=function(){return this.m_coordIndex},a.IndexedFaceSet.prototype.GetCoordIndex=function(){return this.m_coordIndex},a.IndexedFaceSet.prototype.GetCoord=function(){return this.m_coord},a.IndexedFaceSet.prototype.GetNormal=function(){return this.m_normal},a.IndexedFaceSet.prototype.GetFloatAttribute=function(t){return this.m_floatAttribute[t]},a.IndexedFaceSet.prototype.GetIntAttribute=function(t){return this.m_intAttribute[t]},a.IndexedFaceSet.prototype.SetNCoordIndex=function(t){this.m_nCoordIndex=t},a.IndexedFaceSet.prototype.SetNNormalIndex=function(){},a.IndexedFaceSet.prototype.SetNormalPerVertex=function(){},a.IndexedFaceSet.prototype.SetNFloatAttributeIndex=function(){},a.IndexedFaceSet.prototype.SetNIntAttributeIndex=function(){},a.IndexedFaceSet.prototype.SetFloatAttributePerVertex=function(){},a.IndexedFaceSet.prototype.SetIntAttributePerVertex=function(){},a.IndexedFaceSet.prototype.SetNCoord=function(t){this.m_nCoord=t},a.IndexedFaceSet.prototype.SetNNormal=function(t){this.m_nNormal=t},a.IndexedFaceSet.prototype.SetNumFloatAttributes=function(t){this.m_numFloatAttributes=t},a.IndexedFaceSet.prototype.SetNumIntAttributes=function(t){this.m_numIntAttributes=t},a.IndexedFaceSet.prototype.SetCreaseAngle=function(t){this.m_creaseAngle=t},a.IndexedFaceSet.prototype.SetCCW=function(t){this.m_ccw=t},a.IndexedFaceSet.prototype.SetSolid=function(t){this.m_solid=t},a.IndexedFaceSet.prototype.SetConvex=function(t){this.m_convex=t},a.IndexedFaceSet.prototype.SetIsTriangularMesh=function(t){this.m_isTriangularMesh=t},a.IndexedFaceSet.prototype.SetCoordMin=function(t,e){this.m_coordMin[t]=e},a.IndexedFaceSet.prototype.SetCoordMax=function(t,e){this.m_coordMax[t]=e},a.IndexedFaceSet.prototype.SetNormalMin=function(t,e){this.m_normalMin[t]=e},a.IndexedFaceSet.prototype.SetNormalMax=function(t,e){this.m_normalMax[t]=e},a.IndexedFaceSet.prototype.SetNFloatAttribute=function(t,e){this.m_nFloatAttribute[t]=e},a.IndexedFaceSet.prototype.SetNIntAttribute=function(t,e){this.m_nIntAttribute[t]=e},a.IndexedFaceSet.prototype.SetFloatAttributeDim=function(t,e){this.m_dimFloatAttribute[t]=e},a.IndexedFaceSet.prototype.SetIntAttributeDim=function(t,e){this.m_dimIntAttribute[t]=e},a.IndexedFaceSet.prototype.SetFloatAttributeType=function(t,e){this.m_typeFloatAttribute[t]=e},a.IndexedFaceSet.prototype.SetIntAttributeType=function(t,e){this.m_typeIntAttribute[t]=e},a.IndexedFaceSet.prototype.SetFloatAttributeMin=function(t,e,r){this.m_minFloatAttribute[t*s.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES+e]=r},a.IndexedFaceSet.prototype.SetFloatAttributeMax=function(t,e,r){this.m_maxFloatAttribute[t*s.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES+e]=r},a.IndexedFaceSet.prototype.SetCoordIndex=function(t){this.m_coordIndex=t},a.IndexedFaceSet.prototype.SetCoord=function(t){this.m_coord=t},a.IndexedFaceSet.prototype.SetNormal=function(t){this.m_normal=t},a.IndexedFaceSet.prototype.SetFloatAttribute=function(t,e){this.m_floatAttribute[t]=e},a.IndexedFaceSet.prototype.SetIntAttribute=function(t,e){this.m_intAttribute[t]=e},a.SC3DMCEncodeParams=function(){var t;for(this.m_numFloatAttributes=0,this.m_numIntAttributes=0,this.m_floatAttributeQuantBits=new Uint32Array(s.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES),this.m_floatAttributePredMode=new Uint32Array(s.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES),this.m_intAttributePredMode=new Uint32Array(s.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES),this.m_encodeMode=s.O3DGC_SC3DMC_ENCODE_MODE_TFAN,this.m_streamTypeMode=s.O3DGC_STREAM_TYPE_ASCII,this.m_coordQuantBits=14,this.m_normalQuantBits=8,this.m_coordPredMode=s.O3DGC_SC3DMC_PARALLELOGRAM_PREDICTION,this.m_normalPredMode=s.O3DGC_SC3DMC_SURF_NORMALS_PREDICTION,t=0;t<s.O3DGC_SC3DMC_MAX_NUM_FLOAT_ATTRIBUTES;++t)this.m_floatAttributePredMode[t]=s.O3DGC_SC3DMC_PARALLELOGRAM_PREDICTION;for(t=0;t<s.O3DGC_SC3DMC_MAX_NUM_INT_ATTRIBUTES;++t)this.m_intAttributePredMode[t]=s.O3DGC_SC3DMC_DIFFERENTIAL_PREDICTION},a.SC3DMCEncodeParams.prototype.GetStreamType=function(){return this.m_streamTypeMode},a.SC3DMCEncodeParams.prototype.GetEncodeMode=function(){return this.m_encodeMode},a.SC3DMCEncodeParams.prototype.GetNumFloatAttributes=function(){return this.m_numFloatAttributes},a.SC3DMCEncodeParams.prototype.GetNumIntAttributes=function(){return this.m_numIntAttributes},a.SC3DMCEncodeParams.prototype.GetCoordQuantBits=function(){return this.m_coordQuantBits},a.SC3DMCEncodeParams.prototype.GetNormalQuantBits=function(){return this.m_normalQuantBits},a.SC3DMCEncodeParams.prototype.GetFloatAttributeQuantBits=function(t){return this.m_floatAttributeQuantBits[t]},a.SC3DMCEncodeParams.prototype.GetCoordPredMode=function(){return this.m_coordPredMode},a.SC3DMCEncodeParams.prototype.GetNormalPredMode=function(){return this.m_normalPredMode},a.SC3DMCEncodeParams.prototype.GetFloatAttributePredMode=function(t){return this.m_floatAttributePredMode[t]},a.SC3DMCEncodeParams.prototype.GetIntAttributePredMode=function(t){return this.m_intAttributePredMode[t]},a.SC3DMCEncodeParams.prototype.GetCoordPredMode=function(){return this.m_coordPredMode},a.SC3DMCEncodeParams.prototype.GetNormalPredMode=function(){return this.m_normalPredMode},a.SC3DMCEncodeParams.prototype.GetFloatAttributePredMode=function(t){return this.m_floatAttributePredMode[t]},a.SC3DMCEncodeParams.prototype.GetIntAttributePredMode=function(t){return this.m_intAttributePredMode[t]},a.SC3DMCEncodeParams.prototype.SetStreamType=function(t){this.m_streamTypeMode=t},a.SC3DMCEncodeParams.prototype.SetEncodeMode=function(t){this.m_encodeMode=t},a.SC3DMCEncodeParams.prototype.SetNumFloatAttributes=function(t){this.m_numFloatAttributes=t},a.SC3DMCEncodeParams.prototype.SetNumIntAttributes=function(t){this.m_numIntAttributes=t},a.SC3DMCEncodeParams.prototype.SetCoordQuantBits=function(t){this.m_coordQuantBits=t},a.SC3DMCEncodeParams.prototype.SetNormalQuantBits=function(t){this.m_normalQuantBits=t},a.SC3DMCEncodeParams.prototype.SetFloatAttributeQuantBits=function(t,e){this.m_floatAttributeQuantBits[t]=e},a.SC3DMCEncodeParams.prototype.SetCoordPredMode=function(t){this.m_coordPredMode=t},a.SC3DMCEncodeParams.prototype.SetNormalPredMode=function(t){this.m_normalPredMode=t},a.SC3DMCEncodeParams.prototype.SetFloatAttributePredMode=function(t,e){this.m_floatAttributePredMode[t]=e},a.SC3DMCEncodeParams.prototype.SetIntAttributePredMode=function(t,e){this.m_intAttributePredMode[t]=e},a.AdjacencyInfo=function(){this.m_neighborsSize=0,this.m_numNeighborsSize=0,this.m_numElements=0,this.m_neighbors={},this.m_numNeighbors={}},a.AdjacencyInfo.prototype.Allocate=function(t,e){return this.m_numElements=t,e>this.m_neighborsSize&&(this.m_neighborsSize=e,this.m_neighbors=new Int32Array(this.m_neighborsSize)),t>this.m_numNeighborsSize&&(this.m_numNeighborsSize=t,this.m_numNeighbors=new Int32Array(this.m_numNeighborsSize)),a.O3DGC_OK},a.AdjacencyInfo.prototype.AllocateNumNeighborsArray=function(t){return t>this.m_numNeighborsSize&&(this.m_numNeighborsSize=t,this.m_numNeighbors=new Int32Array(this.m_numNeighborsSize)),this.m_numElements=t,a.O3DGC_OK},a.AdjacencyInfo.prototype.AllocateNeighborsArray=function(){var t;for(t=1;t<this.m_numElements;++t)this.m_numNeighbors[t]+=this.m_numNeighbors[t-1];return this.m_numNeighbors[this.m_numElements-1]>this.m_neighborsSize&&(this.m_neighborsSize=this.m_numNeighbors[this.m_numElements-1],this.m_neighbors=new Int32Array(this.m_neighborsSize)),a.O3DGC_OK},a.AdjacencyInfo.prototype.ClearNumNeighborsArray=function(){var t;for(t=0;t<this.m_numElements;++t)this.m_numNeighbors[t]=0;return a.O3DGC_OK},a.AdjacencyInfo.prototype.ClearNeighborsArray=function(){var t;for(t=0;t<this.m_neighborsSize;++t)this.m_neighbors[t]=-1;return a.O3DGC_OK},a.AdjacencyInfo.prototype.Begin=function(t){return t>0?this.m_numNeighbors[t-1]:0},a.AdjacencyInfo.prototype.End=function(t){return this.m_numNeighbors[t]},a.AdjacencyInfo.prototype.AddNeighbor=function(t,e){var r,i,o;for(i=this.Begin(t),o=this.End(t),r=i;o>r;++r)if(-1===this.m_neighbors[r])return this.m_neighbors[r]=e,a.O3DGC_OK;return a.O3DGC_ERROR_BUFFER_FULL},a.AdjacencyInfo.prototype.GetNeighbor=function(t){return this.m_neighbors[t]},a.AdjacencyInfo.prototype.GetNumNeighbors=function(t){return this.End(t)-this.Begin(t)},a.AdjacencyInfo.prototype.GetNumNeighborsBuffer=function(){return this.m_numNeighbors},a.AdjacencyInfo.prototype.GetNeighborsBuffer=function(){return this.m_neighbors},a.Vector=function(){this.m_data={},this.m_allocated=0,this.m_size=0},a.Vector.prototype.Clear=function(){this.m_size=0},a.Vector.prototype.Get=function(t){return this.m_data[t]},a.Vector.prototype.GetAllocatedSize=function(){return this.m_allocated},a.Vector.prototype.GetSize=function(){return this.m_size},a.Vector.prototype.GetBuffer=function(){return this.m_data},a.Vector.prototype.SetSize=function(t){this.m_size=t},a.Vector.prototype.Allocate=function(t){var e,r;if(t>this.m_allocated){if(this.m_allocated=t,r=new Int32Array(this.m_allocated),this.m_size>0)for(e=0;e<this.m_size;++e)r[e]=this.m_data[e];this.m_data=r}},a.Vector.prototype.PushBack=function(t){var e,r;if(this.m_size===this.m_allocated){if(this.m_allocated*=2,this.m_allocated<s.O3DGC_DEFAULT_VECTOR_SIZE&&(this.m_allocated=s.O3DGC_DEFAULT_VECTOR_SIZE),r=new Int32Array(this.m_allocated),this.m_size>0)for(e=0;e<this.m_size;++e)r[e]=this.m_data[e];this.m_data=r}this.m_data[this.m_size++]=t},a.CompressedTriangleFans=function(){this.m_numTFANs=new a.Vector,this.m_degrees=new a.Vector,this.m_configs=new a.Vector,this.m_operations=new a.Vector,this.m_indices=new a.Vector,this.m_trianglesOrder=new a.Vector,this.m_streamType=s.O3DGC_STREAM_TYPE_UNKOWN},a.CompressedTriangleFans.prototype.GetStreamType=function(){return this.m_streamType
},a.CompressedTriangleFans.prototype.SetStreamType=function(t){this.m_streamType=t},a.CompressedTriangleFans.prototype.Clear=function(){return this.m_numTFANs.Clear(),this.m_degrees.Clear(),this.m_configs.Clear(),this.m_operations.Clear(),this.m_indices.Clear(),a.O3DGC_OK},a.CompressedTriangleFans.prototype.Allocate=function(t,e){return this.m_numTFANs.Allocate(t),this.m_degrees.Allocate(2*t),this.m_configs.Allocate(2*t),this.m_operations.Allocate(2*t),this.m_indices.Allocate(2*t),this.m_trianglesOrder.Allocate(e),this.Clear(),a.O3DGC_OK},a.CompressedTriangleFans.prototype.PushNumTFans=function(t){this.m_numTFANs.PushBack(t)},a.CompressedTriangleFans.prototype.ReadNumTFans=function(t){return this.m_numTFANs.Get(t.m_count++)},a.CompressedTriangleFans.prototype.PushDegree=function(t){this.m_degrees.PushBack(t)},a.CompressedTriangleFans.prototype.ReadDegree=function(t){return this.m_degrees.Get(t.m_count++)},a.CompressedTriangleFans.prototype.PushConfig=function(t){this.m_configs.PushBack(t)},a.CompressedTriangleFans.prototype.ReadConfig=function(t){return this.m_configs.Get(t.m_count++)},a.CompressedTriangleFans.prototype.PushOperation=function(t){this.m_operations.PushBack(t)},a.CompressedTriangleFans.prototype.ReadOperation=function(t){return this.m_operations.Get(t.m_count++)},a.CompressedTriangleFans.prototype.PushIndex=function(t){this.m_indices.PushBack(t)},a.CompressedTriangleFans.prototype.ReadIndex=function(t){return this.m_indices.Get(t.m_count++)},a.CompressedTriangleFans.prototype.PushTriangleIndex=function(t){this.m_trianglesOrder.PushBack(i(t))},a.CompressedTriangleFans.prototype.ReadTriangleIndex=function(t){return o(this.m_trianglesOrder.Get(t.m_count++))},a.CompressedTriangleFans.prototype.LoadUIntData=function(t,e,r){var i,o;for(e.ReadUInt32ASCII(r),i=e.ReadUInt32ASCII(r),t.Allocate(i),t.Clear(),o=0;i>o;++o)t.PushBack(e.ReadUIntASCII(r));return a.O3DGC_OK},a.CompressedTriangleFans.prototype.LoadIntData=function(t,e,r){var i,o;for(e.ReadUInt32ASCII(r),i=e.ReadUInt32ASCII(r),t.Allocate(i),t.Clear(),o=0;i>o;++o)t.PushBack(e.ReadIntASCII(r));return a.O3DGC_OK},a.CompressedTriangleFans.prototype.LoadBinData=function(t,e,r){var i,o,n,_;for(e.ReadUInt32ASCII(r),i=e.ReadUInt32ASCII(r),t.Allocate(i*s.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL0),t.Clear(),n=0;i>n;)for(o=e.ReadUCharASCII(r),_=0;_<s.O3DGC_BINARY_STREAM_BITS_PER_SYMBOL0;++_)t.PushBack(1&o),o>>>=1,++n;return a.O3DGC_OK},a.CompressedTriangleFans.prototype.LoadUIntAC=function(t,e,r,i){var o,n,_,m,s,d,h;if(o=r.ReadUInt32Bin(i)-12,n=r.ReadUInt32Bin(i),0===n)return a.O3DGC_OK;for(_=r.ReadUInt32Bin(i),m=r.GetBuffer(i,o),i.m_count+=o,t.Allocate(n),s=new a.ArithmeticDecoder,s.SetBuffer(o,m),s.StartDecoder(),d=new a.AdaptiveDataModel,d.SetAlphabet(e+1),h=0;n>h;++h)t.PushBack(s.DecodeAdaptiveDataModel(d)+_);return a.O3DGC_OK},a.CompressedTriangleFans.prototype.LoadIntACEGC=function(t,e,r,i){var o,n,_,m,d,h,u,c,C,l;if(o=r.ReadUInt32Bin(i)-12,n=r.ReadUInt32Bin(i),0===n)return a.O3DGC_OK;for(_=r.ReadUInt32Bin(i)-s.O3DGC_MAX_LONG,m=r.GetBuffer(i,o),i.m_count+=o,t.Allocate(n),d=new a.ArithmeticDecoder,d.SetBuffer(o,m),d.StartDecoder(),h=new a.AdaptiveDataModel,h.SetAlphabet(e+2),u=new a.StaticBitModel,c=new a.AdaptiveBitModel,l=0;n>l;++l)C=d.DecodeAdaptiveDataModel(h),C===e&&(C+=d.ExpGolombDecode(0,u,c)),t.PushBack(C+_);return a.O3DGC_OK},a.CompressedTriangleFans.prototype.LoadBinAC=function(t,e,r){var i,o,n,_,m,s;if(i=e.ReadUInt32Bin(r)-8,o=e.ReadUInt32Bin(r),0===o)return a.O3DGC_OK;for(n=e.GetBuffer(r,i),r.m_count+=i,t.Allocate(o),_=new a.ArithmeticDecoder,_.SetBuffer(i,n),_.StartDecoder(),m=new a.AdaptiveBitModel,s=0;o>s;++s)t.PushBack(_.DecodeAdaptiveBitModel(m));return a.O3DGC_OK},a.CompressedTriangleFans.prototype.Load=function(t,e,r,i){return i===s.O3DGC_STREAM_TYPE_ASCII?(this.LoadUIntData(this.m_numTFANs,t,e),this.LoadUIntData(this.m_degrees,t,e),this.LoadUIntData(this.m_configs,t,e),this.LoadBinData(this.m_operations,t,e),this.LoadIntData(this.m_indices,t,e),r&&this.LoadUIntData(this.m_trianglesOrder,t,e)):(this.LoadIntACEGC(this.m_numTFANs,4,t,e),this.LoadIntACEGC(this.m_degrees,16,t,e),this.LoadUIntAC(this.m_configs,10,t,e),this.LoadBinAC(this.m_operations,t,e),this.LoadIntACEGC(this.m_indices,8,t,e),r&&this.LoadIntACEGC(this.m_trianglesOrder,16,t,e)),a.O3DGC_OK},a.TriangleFans=function(){this.m_verticesAllocatedSize=0,this.m_sizeTFANAllocatedSize=0,this.m_numTFANs=0,this.m_numVertices=0,this.m_sizeTFAN={},this.m_vertices={}},a.TriangleFans.prototype.Allocate=function(t,e){return this.m_numTFANs=0,this.m_numVertices=0,this.m_verticesAllocatedSize<e&&(this.m_verticesAllocatedSize=e,this.m_vertices=new Int32Array(this.m_verticesAllocatedSize)),this.m_sizeTFANAllocatedSize<t&&(this.m_sizeTFANAllocatedSize=t,this.m_sizeTFAN=new Int32Array(this.m_sizeTFANAllocatedSize)),a.O3DGC_OK},a.TriangleFans.prototype.Clear=function(){return this.m_numTFANs=0,this.m_numVertices=0,a.O3DGC_OK},a.TriangleFans.prototype.AddVertex=function(t){var e,r;if(++this.m_numVertices,this.m_numVertices>this.m_verticesAllocatedSize){for(this.m_verticesAllocatedSize*=2,r=new Int32Array(this.m_verticesAllocatedSize),e=0;e<this.m_numVertices;++e)r[e]=this.m_vertices[e];this.m_vertices=r}return this.m_vertices[this.m_numVertices-1]=t,++this.m_sizeTFAN[this.m_numTFANs-1],a.O3DGC_OK},a.TriangleFans.prototype.AddTFAN=function(){var t,e;if(++this.m_numTFANs,this.m_numTFANs>this.m_sizeTFANAllocatedSize){for(this.m_sizeTFANAllocatedSize*=2,e=new Int32Array(this.m_sizeTFANAllocatedSize),t=0;t<this.m_numTFANs;++t)e[t]=this.m_sizeTFAN[t];this.m_sizeTFAN=e}return this.m_sizeTFAN[this.m_numTFANs-1]=this.m_numTFANs>1?this.m_sizeTFAN[this.m_numTFANs-2]:0,a.O3DGC_OK},a.TriangleFans.prototype.Begin=function(t){return t>0?this.m_sizeTFAN[t-1]:0},a.TriangleFans.prototype.End=function(t){return this.m_sizeTFAN[t]},a.TriangleFans.prototype.GetVertex=function(t){return this.m_vertices[t]},a.TriangleFans.prototype.GetTFANSize=function(t){return this.End(t)-this.Begin(t)},a.TriangleFans.prototype.GetNumTFANs=function(){return this.m_numTFANs},a.TriangleFans.prototype.GetNumVertices=function(){return this.m_numVertices},a.TriangleListDecoder=function(){this.m_itNumTFans=new a.Iterator,this.m_itDegree=new a.Iterator,this.m_itConfig=new a.Iterator,this.m_itOperation=new a.Iterator,this.m_itIndex=new a.Iterator,this.m_maxNumVertices=0,this.m_maxNumTriangles=0,this.m_numTriangles=0,this.m_numVertices=0,this.m_tempTrianglesSize=0,this.m_vertexCount=0,this.m_triangleCount=0,this.m_numConqueredTriangles=0,this.m_numVisitedVertices=0,this.m_triangles={},this.m_tempTriangles={},this.m_visitedVertices={},this.m_visitedVerticesValence={},this.m_vertexToTriangle=new a.AdjacencyInfo,this.m_ctfans=new a.CompressedTriangleFans,this.m_tfans=new a.TriangleFans,this.m_streamType=s.O3DGC_STREAM_TYPE_ASCII,this.m_decodeTrianglesOrder=!1,this.m_decodeVerticesOrder=!1,this.m_processConfig={0:function(t,e){var r;for(t.m_tfans.AddVertex(t.m_visitedVertices[0]),r=1;e-1>r;++r)t.m_visitedVertices[t.m_numVisitedVertices++]=t.m_vertexCount,t.m_tfans.AddVertex(t.m_vertexCount++);t.m_tfans.AddVertex(t.m_visitedVertices[1])},1:function(t,e,r){var i,o,n;for(t.m_tfans.AddVertex(t.m_visitedVertices[0]),i=1;e-1>i;++i)o=t.m_ctfans.ReadOperation(t.m_itOperation),1===o?(n=t.m_ctfans.ReadIndex(t.m_itIndex),0>n?t.m_tfans.AddVertex(t.m_visitedVertices[-n-1]):t.m_tfans.AddVertex(n+r)):(t.m_visitedVertices[t.m_numVisitedVertices++]=t.m_vertexCount,t.m_tfans.AddVertex(t.m_vertexCount++));t.m_tfans.AddVertex(t.m_visitedVertices[1])},2:function(t,e){var r;for(r=0;e-1>r;++r)t.m_visitedVertices[t.m_numVisitedVertices++]=t.m_vertexCount,t.m_tfans.AddVertex(t.m_vertexCount++);t.m_tfans.AddVertex(t.m_visitedVertices[0])},3:function(t,e){var r;for(r=0;e-1>r;++r)t.m_visitedVertices[t.m_numVisitedVertices++]=t.m_vertexCount,t.m_tfans.AddVertex(t.m_vertexCount++);t.m_tfans.AddVertex(t.m_visitedVertices[1])},4:function(t,e){var r;for(t.m_tfans.AddVertex(t.m_visitedVertices[0]),r=1;e>r;++r)t.m_visitedVertices[t.m_numVisitedVertices++]=t.m_vertexCount,t.m_tfans.AddVertex(t.m_vertexCount++)},5:function(t,e){var r;for(t.m_tfans.AddVertex(t.m_visitedVertices[1]),r=1;e>r;++r)t.m_visitedVertices[t.m_numVisitedVertices++]=t.m_vertexCount,t.m_tfans.AddVertex(t.m_vertexCount++)},6:function(t,e){var r;for(r=0;e>r;++r)t.m_visitedVertices[t.m_numVisitedVertices++]=t.m_vertexCount,t.m_tfans.AddVertex(t.m_vertexCount++)},7:function(t,e){var r;for(t.m_tfans.AddVertex(t.m_visitedVertices[1]),r=1;e-1>r;++r)t.m_visitedVertices[t.m_numVisitedVertices++]=t.m_vertexCount,t.m_tfans.AddVertex(t.m_vertexCount++);t.m_tfans.AddVertex(t.m_visitedVertices[0])},8:function(t,e,r){var i,o,n;for(t.m_tfans.AddVertex(t.m_visitedVertices[1]),i=1;e-1>i;++i)o=t.m_ctfans.ReadOperation(t.m_itOperation),1===o?(n=t.m_ctfans.ReadIndex(t.m_itIndex),0>n?t.m_tfans.AddVertex(t.m_visitedVertices[-n-1]):t.m_tfans.AddVertex(n+r)):(t.m_visitedVertices[t.m_numVisitedVertices++]=t.m_vertexCount,t.m_tfans.AddVertex(t.m_vertexCount++));t.m_tfans.AddVertex(t.m_visitedVertices[0])},9:function(t,e,r){var i,o,n;for(i=0;e>i;++i)o=t.m_ctfans.ReadOperation(t.m_itOperation),1===o?(n=t.m_ctfans.ReadIndex(t.m_itIndex),0>n?t.m_tfans.AddVertex(t.m_visitedVertices[-n-1]):t.m_tfans.AddVertex(n+r)):(t.m_visitedVertices[t.m_numVisitedVertices++]=t.m_vertexCount,t.m_tfans.AddVertex(t.m_vertexCount++))}}},a.TriangleListDecoder.prototype.GetStreamType=function(){return this.m_streamType},a.TriangleListDecoder.prototype.GetReorderTriangles=function(){return this.m_decodeTrianglesOrder},a.TriangleListDecoder.prototype.GetReorderVertices=function(){return this.m_decodeVerticesOrder},a.TriangleListDecoder.prototype.SetStreamType=function(t){this.m_streamType=t},a.TriangleListDecoder.prototype.GetVertexToTriangle=function(){return this.m_vertexToTriangle},a.TriangleListDecoder.prototype.Reorder=function(){var t,e,r,i,n,_,m,s;if(this.m_decodeTrianglesOrder)for(t=this.m_triangles,e=this.m_numTriangles,r=this.m_ctfans.m_trianglesOrder.m_data,_=this.m_tempTriangles,_.set(t),i=0,n=0,s=0;e>s;++s)m=o(r[i++])+n,t[3*m]=_[3*s],t[3*m+1]=_[3*s+1],t[3*m+2]=_[3*s+2],n=m+1;return a.O3DGC_OK},a.TriangleListDecoder.prototype.CompueLocalConnectivityInfo=function(t){var e,r,i,o,n,_,m,s,d,h,u,c,C,l,A,f,p,S,D;for(e=this.m_visitedVertices,r=this.m_visitedVerticesValence,i=this.m_triangles,o=this.m_vertexToTriangle,n=o.Begin(t),_=o.End(t),m=0,d=0,p=0,u=n;p>=0&&_>u;++u)if(p=o.GetNeighbor(u),p>=0)for(++m,S=3*p,C=0;3>C;++C)if(D=i[S+C],D>t){for(s=!1,c=0;d>c;++c){if(D===e[c]){r[c]++,s=!0;break}if(D<e[c]){for(++d,l=d-1;l>c;--l)e[l]=e[l-1],r[l]=r[l-1];e[c]=D,r[c]=1,s=!0;break}}s||(e[d]=D,r[d]=1,d++)}if(d>2)for(A=1;d>A;++A)if(1===r[A])for(f=A;f>0&&r[f]<r[f-1];)h=r[f],r[f]=r[f-1],r[f-1]=h,h=e[f],e[f]=e[f-1],e[f-1]=h,--f;return this.m_numConqueredTriangles=m,this.m_numVisitedVertices=d,a.O3DGC_OK},a.TriangleListDecoder.prototype.DecompressTFAN=function(t){var e,r,i,o,n,_,m,s,d,h,u,c,C,l,A,f,p,S,D;if(e=this.m_vertexToTriangle,r=this.m_triangles,i=this.m_itDegree,o=this.m_itConfig,n=this.m_tfans,m=this.m_processConfig,s=this.m_ctfans,d=this.m_triangleCount,h=this.m_numConqueredTriangles,_=s.ReadNumTFans(this.m_itNumTFans),_>0)for(S=0;_>S;++S)for(n.AddTFAN(),u=s.ReadDegree(i)+2-h,c=s.ReadConfig(o),C=n.GetNumVertices(),n.AddVertex(t),m[c](this,u,t),l=n.GetNumVertices(),A=n.GetVertex(C+1),D=C+2;l>D;++D)f=n.GetVertex(D),p=3*d,r[p++]=t,r[p++]=A,r[p]=f,e.AddNeighbor(t,d),e.AddNeighbor(A,d),e.AddNeighbor(f,d),A=f,d++;return this.m_triangleCount=d,a.O3DGC_OK},a.TriangleListDecoder.prototype.Decompress=function(){var t;for(t=0;t<this.m_numVertices;++t)t===this.m_vertexCount&&this.m_vertexCount++,this.CompueLocalConnectivityInfo(t),this.DecompressTFAN(t);return a.O3DGC_OK},a.TriangleListDecoder.prototype.Init=function(t,e,r,i){var o,n;for(this.m_numTriangles=e,this.m_numVertices=r,this.m_triangles=t,this.m_vertexCount=0,this.m_triangleCount=0,this.m_itNumTFans.m_count=0,this.m_itDegree.m_count=0,this.m_itConfig.m_count=0,this.m_itOperation.m_count=0,this.m_itIndex.m_count=0,this.m_numVertices>this.m_maxNumVertices&&(this.m_maxNumVertices=this.m_numVertices,this.m_visitedVerticesValence=new Int32Array(this.m_numVertices),this.m_visitedVertices=new Int32Array(this.m_numVertices)),this.m_decodeTrianglesOrder&&this.m_tempTrianglesSize<this.m_numTriangles&&(this.m_tempTrianglesSize=this.m_numTriangles,this.m_tempTriangles=new Int32Array(3*this.m_tempTrianglesSize)),this.m_ctfans.SetStreamType(this.m_streamType),this.m_ctfans.Allocate(this.m_numVertices,this.m_numTriangles),this.m_tfans.Allocate(2*this.m_numVertices,8*this.m_numVertices),this.m_vertexToTriangle.AllocateNumNeighborsArray(r),n=this.m_vertexToTriangle.GetNumNeighborsBuffer(),o=0;r>o;++o)n[o]=i;return this.m_vertexToTriangle.AllocateNeighborsArray(),this.m_vertexToTriangle.ClearNeighborsArray(),a.O3DGC_OK},a.TriangleListDecoder.prototype.Decode=function(t,e,r,i,o){var n,_;return n=i.ReadUChar(o,this.m_streamType),this.m_decodeTrianglesOrder=0!==(2&n),this.m_decodeVerticesOrder=0!==(1&n),this.m_decodeVerticesOrder?a.O3DGC_ERROR_NON_SUPPORTED_FEATURE:(_=i.ReadUInt32(o,this.m_streamType),this.Init(t,e,r,_),this.m_ctfans.Load(i,o,this.m_decodeTrianglesOrder,this.m_streamType),this.Decompress(),a.O3DGC_OK)},a.SC3DMCDecoder=function(){var t;for(this.m_iterator=new a.Iterator,this.m_streamSize=0,this.m_params=new a.SC3DMCEncodeParams,this.m_triangleListDecoder=new a.TriangleListDecoder,this.m_quantFloatArray={},this.m_orientation={},this.m_normals={},this.m_quantFloatArraySize=0,this.m_normalsSize=0,this.m_orientationSize=0,this.m_stats=new a.SC3DMCStats,this.m_streamType=s.O3DGC_STREAM_TYPE_UNKOWN,this.m_neighbors=[],this.m_idelta=new Float32Array(s.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES),this.m_minNormal=new Float32Array(2),this.m_maxNormal=new Float32Array(2),this.m_minNormal[0]=this.m_minNormal[1]=-2,this.m_maxNormal[0]=this.m_maxNormal[1]=2,t=0;t<s.O3DGC_SC3DMC_MAX_DIM_ATTRIBUTES;++t)this.m_neighbors[t]=new a.SC3DMCPredictor},a.SC3DMCDecoder.prototype.GetStats=function(){return this.m_stats},a.SC3DMCDecoder.prototype.DecodeHeader=function(t,e){var r,i,o,n,_,m;if(r=this.m_iterator.m_count,i=e.ReadUInt32(this.m_iterator,s.O3DGC_STREAM_TYPE_BINARY),i!==s.O3DGC_SC3DMC_START_CODE){if(this.m_iterator.m_count=r,i=e.ReadUInt32(this.m_iterator,s.O3DGC_STREAM_TYPE_ASCII),i!==s.O3DGC_SC3DMC_START_CODE)return a.O3DGC_ERROR_CORRUPTED_STREAM;this.m_streamType=s.O3DGC_STREAM_TYPE_ASCII}else this.m_streamType=s.O3DGC_STREAM_TYPE_BINARY;if(this.m_streamSize=e.ReadUInt32(this.m_iterator,this.m_streamType),this.m_params.SetEncodeMode(e.ReadUChar(this.m_iterator,this.m_streamType)),t.SetCreaseAngle(e.ReadFloat32(this.m_iterator,this.m_streamType)),o=e.ReadUChar(this.m_iterator,this.m_streamType),t.SetCCW(1===(1&o)),t.SetSolid(1===(2&o)),t.SetConvex(1===(4&o)),t.SetIsTriangularMesh(1===(8&o)),t.SetNCoord(e.ReadUInt32(this.m_iterator,this.m_streamType)),t.SetNNormal(e.ReadUInt32(this.m_iterator,this.m_streamType)),t.SetNumFloatAttributes(e.ReadUInt32(this.m_iterator,this.m_streamType)),t.SetNumIntAttributes(e.ReadUInt32(this.m_iterator,this.m_streamType)),t.GetNCoord()>0){for(t.SetNCoordIndex(e.ReadUInt32(this.m_iterator,this.m_streamType)),n=0;3>n;++n)t.SetCoordMin(n,e.ReadFloat32(this.m_iterator,this.m_streamType)),t.SetCoordMax(n,e.ReadFloat32(this.m_iterator,this.m_streamType));this.m_params.SetCoordQuantBits(e.ReadUChar(this.m_iterator,this.m_streamType))}if(t.GetNNormal()>0){for(t.SetNNormalIndex(e.ReadUInt32(this.m_iterator,this.m_streamType)),n=0;3>n;++n)t.SetNormalMin(n,e.ReadFloat32(this.m_iterator,this.m_streamType)),t.SetNormalMax(n,e.ReadFloat32(this.m_iterator,this.m_streamType));t.SetNormalPerVertex(1===e.ReadUChar(this.m_iterator,this.m_streamType)),this.m_params.SetNormalQuantBits(e.ReadUChar(this.m_iterator,this.m_streamType))}for(_=0;_<t.GetNumFloatAttributes();++_)if(t.SetNFloatAttribute(_,e.ReadUInt32(this.m_iterator,this.m_streamType)),t.GetNFloatAttribute(_)>0){for(t.SetNFloatAttributeIndex(_,e.ReadUInt32(this.m_iterator,this.m_streamType)),m=e.ReadUChar(this.m_iterator,this.m_streamType),t.SetFloatAttributeDim(_,m),n=0;m>n;++n)t.SetFloatAttributeMin(_,n,e.ReadFloat32(this.m_iterator,this.m_streamType)),t.SetFloatAttributeMax(_,n,e.ReadFloat32(this.m_iterator,this.m_streamType));t.SetFloatAttributePerVertex(_,1===e.ReadUChar(this.m_iterator,this.m_streamType)),t.SetFloatAttributeType(_,e.ReadUChar(this.m_iterator,this.m_streamType)),this.m_params.SetFloatAttributeQuantBits(_,e.ReadUChar(this.m_iterator,this.m_streamType))}for(_=0;_<t.GetNumIntAttributes();++_)t.SetNIntAttribute(_,e.ReadUInt32(this.m_iterator,this.m_streamType)),t.GetNIntAttribute(_)>0&&(t.SetNIntAttributeIndex(_,e.ReadUInt32(this.m_iterator,this.m_streamType)),t.SetIntAttributeDim(_,e.ReadUChar(this.m_iterator,this.m_streamType)),t.SetIntAttributePerVertex(_,1===e.ReadUChar(this.m_iterator,this.m_streamType)),t.SetIntAttributeType(_,e.ReadUChar(this.m_iterator,this.m_streamType)));return a.O3DGC_OK},a.SC3DMCDecoder.prototype.DecodeIntArrayBinary=function(t,e,r,i,o,_,m){var d,h,u,c,C,l,A,f,p,S,D,I,T,y,O,G,M,N,E,R,b,F,x,B,g,v,U,V,P,z,w,L;if(p=this.m_iterator,S=this.m_streamType,I=new a.ArithmeticDecoder,T=new a.StaticBitModel,y=new a.AdaptiveBitModel,O=new a.AdaptiveDataModel,O.SetAlphabet(s.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS+1),G=this.m_triangleListDecoder.GetVertexToTriangle(),M=G.m_neighbors,N=o.GetCoordIndex(),E=e*r,R=p.m_count,b=m.ReadUInt32(p,S),F=m.ReadUChar(p,S),x=7&F>>>4,_.m_value=7&F,b-=p.m_count-R,B=new a.Iterator,B.m_count=p.m_count+b,g=0,v=0,U=new a.SC3DMCTriplet(-1,-1,-1),x!==s.O3DGC_SC3DMC_BINARIZATION_AC_EGC)return a.O3DGC_ERROR_CORRUPTED_STREAM;for(f=m.GetBuffer(p,b),p.m_count+=b,I.SetBuffer(b,f),I.StartDecoder(),g=I.ExpGolombDecode(0,T,y),v=I.ExpGolombDecode(0,T,y),V=new a.AdaptiveDataModel,V.SetAlphabet(v+2),P=this.m_neighbors,z=this.m_normals,w=new a.NumberRef,d=_.m_value!==s.O3DGC_SC3DMC_NO_PREDICTION,L=0;e>L;++L){if(w.m_value=0,G.GetNumNeighbors(L)>0&&d)for(l=G.Begin(L),A=G.End(L),c=l;A>c&&(C=M[c],!(0>C));++c)n(N,C,L,w,P,r,t,i);if(w.m_value>1)for(h=I.DecodeAdaptiveDataModel(O),u=0;r>u;++u)D=I.DecodeIntACEGC(V,T,y,g,v),t[L*i+u]=D+P[h].m_pred[u];else if(L>0&&_.m_value!==s.O3DGC_SC3DMC_NO_PREDICTION)for(u=0;r>u;++u)D=I.DecodeIntACEGC(V,T,y,g,v),t[L*i+u]=D+t[(L-1)*i+u];else for(u=0;r>u;++u)D=I.DecodeUIntACEGC(V,T,y,g,v),t[L*i+u]=D}return p.m_count=B.m_count,a.O3DGC_OK},a.SC3DMCDecoder.prototype.DecodeIntArrayASCII=function(t,e,r,i,o,_,m){var d,h,u,c,C,l,A,f,p,S,D,I,T,y,O,G,M,N,E,R,b,F,x,B;if(h=this.m_iterator,u=this.m_streamType,C=this.m_triangleListDecoder.GetVertexToTriangle(),l=C.m_neighbors,A=o.GetCoordIndex(),f=e*r,p=h.m_count,S=m.ReadUInt32(h,u),D=m.ReadUChar(h,u),I=7&D>>>4,_.m_value=7&D,S-=h.m_count-p,T=new a.Iterator,T.m_count=h.m_count+S,y=new a.SC3DMCTriplet(-1,-1,-1),I!==s.O3DGC_SC3DMC_BINARIZATION_ASCII)return a.O3DGC_ERROR_CORRUPTED_STREAM;for(m.ReadUInt32(T,u),O=this.m_neighbors,G=this.m_normals,M=new a.NumberRef,d=_.m_value!==s.O3DGC_SC3DMC_NO_PREDICTION,N=0;e>N;++N){if(M.m_value=0,C.GetNumNeighbors(N)>0&&d)for(E=C.Begin(N),R=C.End(N),b=E;R>b&&(F=l[b],!(0>F));++b)n(A,F,N,M,O,r,t,i);if(M.m_value>1)for(B=m.ReadUCharASCII(T),x=0;r>x;++x)c=m.ReadIntASCII(h),t[N*i+x]=c+O[B].m_pred[x];else if(N>0&&_.m_value!==s.O3DGC_SC3DMC_NO_PREDICTION)for(x=0;r>x;++x)c=m.ReadIntASCII(h),t[N*i+x]=c+t[(N-1)*i+x];else for(x=0;r>x;++x)c=m.ReadUIntASCII(h),t[N*i+x]=c}return h.m_count=T.m_count,a.O3DGC_OK},a.SC3DMCDecoder.prototype.DecodeIntArray=function(t,e,r,i,o,n,_){return this.m_streamType===s.O3DGC_STREAM_TYPE_ASCII?this.DecodeIntArrayASCII(t,e,r,i,o,n,_):this.DecodeIntArrayBinary(t,e,r,i,o,n,_)},a.SC3DMCDecoder.prototype.ProcessNormals=function(t){var e,i,o,n,_,s,d,h,u,c,C,l,A,f,p;for(o=t.GetNNormal(),n=3*t.GetNNormal(),this.m_normalsSize<n&&(this.m_normalsSize=n,this.m_normals=new Float32Array(this.m_normalsSize)),_=this.m_normals,s=this.m_quantFloatArray,d=this.m_orientation,h=t.GetCoordIndex(),m(h,t.GetNCoordIndex(),s,o,_),u=new a.Vec3,c=new a.Vec3,C=0;o>C;++C)e=3*C,u.m_x=_[e],u.m_y=_[e+1],u.m_z=_[e+2],p=Math.sqrt(u.m_x*u.m_x+u.m_y*u.m_y+u.m_z*u.m_z),0===p&&(p=1),r(u,c),l=c.m_x/p,A=c.m_y/p,f=c.m_z+d[C],d[C]=f,f>>>1!==c.m_z>>>1&&(l=0,A=0),i=2*C,_[i]=l,_[i+1]=A;return a.O3DGC_OK},a.SC3DMCDecoder.prototype.IQuantize=function(t,e,r,i,o,n,_,m){var d,h,u,c,C,l;if(m.m_value===s.O3DGC_SC3DMC_SURF_NORMALS_PREDICTION)for(l=s.CubeToSphere,c=this.m_orientation,C=this.m_normals,h=new a.Vec3(0,0,0),u=new a.Vec3(0,0,0),this.IQuantizeFloatArray(t,e,r,i,this.m_minNormal,this.m_maxNormal,_+1),d=0;e>d;++d)h.m_x=t[i*d]+C[2*d],h.m_y=t[i*d+1]+C[2*d+1],h.m_z=c[d],l[h.m_z](h,u),t[i*d]=u.m_x,t[i*d+1]=u.m_y,t[i*d+2]=u.m_z;else this.IQuantizeFloatArray(t,e,r,i,o,n,_)},a.SC3DMCDecoder.prototype.DecodeFloatArrayBinary=function(t,e,r,i,m,d,h,u,c,C){var l,A,f,p,S,D,I,T,y,O,G,M,N,E,R,b,F,x,B,g,v,U,V,P,z,w,L,Y,X,H,K,q,Q,k,Z,j;if(F=this.m_iterator,x=this.m_orientation,B=this.m_streamType,v=new a.ArithmeticDecoder,U=new a.StaticBitModel,V=new a.AdaptiveBitModel,P=new a.AdaptiveDataModel,l=s.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS,P.SetAlphabet(l+1),z=this.m_triangleListDecoder.GetVertexToTriangle(),w=z.m_neighbors,L=u.GetCoordIndex(),Y=e*r,X=F.m_count,H=C.ReadUInt32(F,B),K=C.ReadUChar(F,B),q=7&K>>>4,c.m_value=7&K,H-=F.m_count-X,Q=new a.Iterator,Q.m_count=F.m_count+H,k=0,Z=0,q!==s.O3DGC_SC3DMC_BINARIZATION_AC_EGC)return a.O3DGC_ERROR_CORRUPTED_STREAM;if(D=C.GetBuffer(F,H),F.m_count+=H,v.SetBuffer(H,D),v.StartDecoder(),k=v.ExpGolombDecode(0,U,V),Z=v.ExpGolombDecode(0,U,V),j=new a.AdaptiveDataModel,j.SetAlphabet(Z+2),c.m_value===s.O3DGC_SC3DMC_SURF_NORMALS_PREDICTION){for(this.m_orientationSize<Y&&(this.m_orientationSize=Y,this.m_orientation=new Int8Array(this.m_orientationSize),x=this.m_orientation),S=new a.AdaptiveDataModel,S.SetAlphabet(12),M=0;e>M;++M)x[M]=o(v.DecodeAdaptiveDataModel(S));this.ProcessNormals(u),r=2}for(this.m_quantFloatArraySize<Y&&(this.m_quantFloatArraySize=Y,this.m_quantFloatArray=new Int32Array(this.m_quantFloatArraySize)),I=this.m_quantFloatArray,T=this.m_neighbors,y=this.m_normals,O=new a.NumberRef,A=c.m_value!==s.O3DGC_SC3DMC_NO_PREDICTION,f=c.m_value===s.O3DGC_SC3DMC_PARALLELOGRAM_PREDICTION,N=0;e>N;++N){if(O.m_value=0,z.GetNumNeighbors(N)>0&&A){if(R=z.Begin(N),b=z.End(N),f)for(E=R;b>E&&(G=w[E],!(0>G));++E)_(L,G,N,O,T,r,I,i,z,w);if(O.m_value<l)for(E=R;b>E&&(G=w[E],!(0>G));++E)n(L,G,N,O,T,r,I,i)}if(O.m_value>1)for(p=v.DecodeAdaptiveDataModel(P),M=0;r>M;++M)g=v.DecodeIntACEGC(j,U,V,k,Z),I[N*i+M]=g+T[p].m_pred[M];else if(N>0&&A)for(M=0;r>M;++M)g=v.DecodeIntACEGC(j,U,V,k,Z),I[N*i+M]=g+I[(N-1)*i+M];else for(M=0;r>M;++M)g=v.DecodeUIntACEGC(j,U,V,k,Z),I[N*i+M]=g}return F.m_count=Q.m_count,this.IQuantize(t,e,r,i,m,d,h,c),a.O3DGC_OK},a.SC3DMCDecoder.prototype.DecodeFloatArrayASCII=function(t,e,r,i,o,m,d,h,u,c){var C,l,A,f,p,S,D,I,T,y,O,G,M,N,E,R,b,F,x,B,g,v,U,V,P,z,w;if(C=s.O3DGC_SC3DMC_MAX_PREDICTION_NEIGHBORS,f=this.m_iterator,p=this.m_orientation,S=this.m_streamType,I=this.m_triangleListDecoder.GetVertexToTriangle(),T=I.m_neighbors,y=h.GetCoordIndex(),O=e*r,G=f.m_count,M=c.ReadUInt32(f,S),N=c.ReadUChar(f,S),E=7&N>>>4,u.m_value=7&N,M-=f.m_count-G,R=new a.Iterator,R.m_count=f.m_count+M,E!==s.O3DGC_SC3DMC_BINARIZATION_ASCII)return a.O3DGC_ERROR_CORRUPTED_STREAM;if(c.ReadUInt32(R,S),u.m_value===s.O3DGC_SC3DMC_SURF_NORMALS_PREDICTION){for(this.m_orientationSize<e&&(this.m_orientationSize=e,this.m_orientation=new Int8Array(this.m_orientationSize),p=this.m_orientation),z=0;e>z;++z)p[z]=c.ReadIntASCII(f);this.ProcessNormals(h),r=2}for(this.m_quantFloatArraySize<O&&(this.m_quantFloatArraySize=O,this.m_quantFloatArray=new Int32Array(this.m_quantFloatArraySize)),b=this.m_quantFloatArray,F=this.m_neighbors,x=this.m_normals,B=new a.NumberRef,l=u.m_value!==s.O3DGC_SC3DMC_NO_PREDICTION,A=u.m_value===s.O3DGC_SC3DMC_PARALLELOGRAM_PREDICTION,g=0;e>g;++g){if(B.m_value=0,I.GetNumNeighbors(g)>0&&l){if(U=I.Begin(g),V=I.End(g),A)for(v=U;V>v&&(P=T[v],!(0>P));++v)_(y,P,g,B,F,r,b,i,I,T);if(B.m_value<C)for(v=U;V>v&&(P=T[v],!(0>P));++v)n(y,P,g,B,F,r,b,i)}if(B.m_value>1)for(w=c.ReadUCharASCII(R),z=0;r>z;++z)D=c.ReadIntASCII(f),b[g*i+z]=D+F[w].m_pred[z];else if(g>0&&u.m_value!==s.O3DGC_SC3DMC_NO_PREDICTION)for(z=0;r>z;++z)D=c.ReadIntASCII(f),b[g*i+z]=D+b[(g-1)*i+z];else for(z=0;r>z;++z)D=c.ReadUIntASCII(f),b[g*i+z]=D}return f.m_count=R.m_count,this.IQuantize(t,e,r,i,o,m,d,u),a.O3DGC_OK},a.SC3DMCDecoder.prototype.DecodeFloatArray=function(t,e,r,i,o,n,_,m,a,d){return this.m_streamType===s.O3DGC_STREAM_TYPE_ASCII?this.DecodeFloatArrayASCII(t,e,r,i,o,n,_,m,a,d):this.DecodeFloatArrayBinary(t,e,r,i,o,n,_,m,a,d)},a.SC3DMCDecoder.prototype.IQuantizeFloatArray=function(t,e,r,i,o,n,_){var m,s,d,h,u;for(m=this.m_idelta,s=this.m_quantFloatArray,d=0;r>d;++d)h=n[d]-o[d],m[d]=h>0?h/((1<<_>>>0)-1):1;for(u=0;e>u;++u)for(d=0;r>d;++d)t[u*i+d]=s[u*i+d]*m[d]+o[d];return a.O3DGC_OK},a.SC3DMCDecoder.prototype.DecodePlayload=function(t,e){var r,i,o,n,_,m,s;if(r=this.m_params,i=this.m_iterator,o=this.m_stats,n=new a.NumberRef,_=new a.Timer,m=a.O3DGC_OK,this.m_triangleListDecoder.SetStreamType(this.m_streamType),o.m_streamSizeCoordIndex=i.m_count,_.Tic(),this.m_triangleListDecoder.Decode(t.GetCoordIndex(),t.GetNCoordIndex(),t.GetNCoord(),e,i),_.Toc(),o.m_timeCoordIndex=_.GetElapsedTime(),o.m_streamSizeCoordIndex=i.m_count-o.m_streamSizeCoordIndex,o.m_streamSizeCoord=i.m_count,_.Tic(),t.GetNCoord()>0&&(m=this.DecodeFloatArray(t.GetCoord(),t.GetNCoord(),3,3,t.GetCoordMinArray(),t.GetCoordMaxArray(),r.GetCoordQuantBits(),t,n,e),r.SetCoordPredMode(n.m_value)),m!==a.O3DGC_OK)return m;if(_.Toc(),o.m_timeCoord=_.GetElapsedTime(),o.m_streamSizeCoord=i.m_count-o.m_streamSizeCoord,o.m_streamSizeNormal=i.m_count,_.Tic(),t.GetNNormal()>0&&(m=this.DecodeFloatArray(t.GetNormal(),t.GetNNormal(),3,3,t.GetNormalMinArray(),t.GetNormalMaxArray(),r.GetNormalQuantBits(),t,n,e),r.SetNormalPredMode(n.m_value)),m!==a.O3DGC_OK)return m;for(_.Toc(),o.m_timeNormal=_.GetElapsedTime(),o.m_streamSizeNormal=i.m_count-o.m_streamSizeNormal,s=0;s<t.GetNumFloatAttributes();++s)o.m_streamSizeFloatAttribute[s]=i.m_count,_.Tic(),m=this.DecodeFloatArray(t.GetFloatAttribute(s),t.GetNFloatAttribute(s),t.GetFloatAttributeDim(s),t.GetFloatAttributeDim(s),t.GetFloatAttributeMinArray(s),t.GetFloatAttributeMaxArray(s),r.GetFloatAttributeQuantBits(s),t,n,e),r.SetFloatAttributePredMode(s,n.m_value),_.Toc(),o.m_timeFloatAttribute[s]=_.GetElapsedTime(),o.m_streamSizeFloatAttribute[s]=i.m_count-o.m_streamSizeFloatAttribute[s];if(m!==a.O3DGC_OK)return m;for(s=0;s<t.GetNumIntAttributes();++s)o.m_streamSizeIntAttribute[s]=i.m_count,_.Tic(),m=this.DecodeIntArray(t.GetIntAttribute(s),t.GetNIntAttribute(s),t.GetIntAttributeDim(s),t.GetIntAttributeDim(s),t,n,e),r.SetIntAttributePredMode(s,n.m_value),_.Toc(),o.m_timeIntAttribute[s]=_.GetElapsedTime(),o.m_streamSizeIntAttribute[s]=i.m_count-o.m_streamSizeIntAttribute[s];return m!==a.O3DGC_OK?m:(_.Tic(),this.m_triangleListDecoder.Reorder(),_.Toc(),o.m_timeReorder=_.GetElapsedTime(),m)},a.DVEncodeParams=function(){this.m_encodeMode=s.O3DGC_DYNAMIC_VECTOR_ENCODE_MODE_LIFT,this.m_streamTypeMode=s.O3DGC_STREAM_TYPE_ASCII,this.m_quantBits=10},a.DVEncodeParams.prototype.GetStreamType=function(){return this.m_streamTypeMode},a.DVEncodeParams.prototype.GetEncodeMode=function(){return this.m_encodeMode},a.DVEncodeParams.prototype.GetQuantBits=function(){return this.m_quantBits},a.DVEncodeParams.prototype.SetStreamType=function(t){this.m_streamTypeMode=t},a.DVEncodeParams.prototype.SetEncodeMode=function(t){this.m_encodeMode=t},a.DVEncodeParams.prototype.SetQuantBits=function(t){this.m_quantBits=t},a.DynamicVector=function(){this.m_num=0,this.m_dim=0,this.m_stride=0,this.m_max={},this.m_min={},this.m_vectors={}},a.DynamicVector.prototype.GetNVector=function(){return this.m_num},a.DynamicVector.prototype.GetDimVector=function(){return this.m_dim},a.DynamicVector.prototype.GetStride=function(){return this.m_stride},a.DynamicVector.prototype.GetMinArray=function(){return this.m_min},a.DynamicVector.prototype.GetMaxArray=function(){return this.m_max},a.DynamicVector.prototype.GetVectors=function(){return this.m_vectors},a.DynamicVector.prototype.GetMin=function(t){return this.m_min[t]},a.DynamicVector.prototype.GetMax=function(t){return this.m_max[t]},a.DynamicVector.prototype.SetNVector=function(t){this.m_num=t},a.DynamicVector.prototype.SetDimVector=function(t){this.m_dim=t},a.DynamicVector.prototype.SetStride=function(t){this.m_stride=t},a.DynamicVector.prototype.SetMinArray=function(t){this.m_min=t},a.DynamicVector.prototype.SetMaxArray=function(t){this.m_max=t},a.DynamicVector.prototype.SetMin=function(t,e){this.m_min[t]=e},a.DynamicVector.prototype.SetMax=function(t,e){this.m_max[t]=e},a.DynamicVector.prototype.SetVectors=function(t){this.m_vectors=t},a.DynamicVectorDecoder=function(){this.m_streamSize=0,this.m_maxNumVectors=0,this.m_numVectors=0,this.m_dimVectors=0,this.m_quantVectors={},this.m_iterator=new a.Iterator,this.m_streamType=s.O3DGC_STREAM_TYPE_UNKOWN,this.m_params=new a.DVEncodeParams},a.DynamicVectorDecoder.prototype.GetStreamType=function(){return this.m_streamType},a.DynamicVectorDecoder.prototype.GetIterator=function(){return this.m_iterator},a.DynamicVectorDecoder.prototype.SetStreamType=function(t){this.m_streamType=t},a.DynamicVectorDecoder.prototype.SetIterator=function(t){this.m_iterator=t},a.DynamicVectorDecoder.prototype.IUpdate=function(t,e,r){var i,o;for(o=r-1,i=2,t[e]-=t[e+1]>>1;o>i;)t[e+i]-=t[e+i-1]+t[e+i+1]+2>>2,i+=2;return i===o&&(t[e+i]-=t[e+i-1]>>1),a.O3DGC_OK},a.DynamicVectorDecoder.prototype.IPredict=function(t,e,r){var i,o;for(o=r-1,i=1;o>i;)t[e+i]+=t[e+i-1]+t[e+i+1]+1>>1,i+=2;return i===o&&(t[e+i]+=t[e+i-1]),a.O3DGC_OK},a.DynamicVectorDecoder.prototype.Merge=function(t,e,r){var i,o,n,_,m;for(o=(r>>1)+(1&r),n=o-1,_=o;n>0;){for(i=n;_>i;i+=2)m=t[e+i],t[e+i]=t[e+i+1],t[e+i+1]=m;--n,++_}return a.O3DGC_OK},a.DynamicVectorDecoder.prototype.ITransform=function(t,e,r){var i,o,n,_;for(i=r,o=0,n=0,o+=(1&i)<<n++>>>0;i>1;)i=(i>>1)+((1&i)>>>0),o+=(1&i)<<n++>>>0;for(_=n-2;_>=0;--_)i=(i<<1>>>0)-(1&o>>>_)>>>0,this.Merge(t,e,i),this.IUpdate(t,e,i),this.IPredict(t,e,i);return a.O3DGC_OK},a.DynamicVectorDecoder.prototype.IQuantize=function(t,e,r,i,o,n,_){var m,s,d,h,u,c;for(m=this.m_quantVectors,h=e*r,u=0;r>u;++u)for(s=n[u]-o[u],d=s>0?s/((1<<_>>>0)-1):1,c=0;e>c;++c)t[c*i+u]=m[c+u*e]*d+o[u];return a.O3DGC_OK},a.DynamicVectorDecoder.prototype.DecodeHeader=function(t,e){var r,i,o,n;if(r=this.m_iterator,i=r.m_count,o=e.ReadUInt32(r,s.O3DGC_STREAM_TYPE_BINARY),o!==s.O3DGC_DV_START_CODE){if(r.m_count=i,o=e.ReadUInt32(r,s.O3DGC_STREAM_TYPE_ASCII),o!==s.O3DGC_DV_START_CODE)return a.O3DGC_ERROR_CORRUPTED_STREAM;this.m_streamType=s.O3DGC_STREAM_TYPE_ASCII}else this.m_streamType=s.O3DGC_STREAM_TYPE_BINARY;return n=this.m_streamType,this.m_streamSize=e.ReadUInt32(r,n),this.m_params.SetEncodeMode(e.ReadUChar(r,n)),t.SetNVector(e.ReadUInt32(r,n)),t.GetNVector()>0&&(t.SetDimVector(e.ReadUInt32(r,n)),this.m_params.SetQuantBits(e.ReadUChar(r,n))),a.O3DGC_OK},a.DynamicVectorDecoder.prototype.DecodePlayload=function(t,e){var r,i,o,n,_,m,d,h,u,c,C,l,A,f,p,S,D,I,T;for(i=this.m_iterator,o=this.m_streamType,n=a.O3DGC_OK,_=i.m_count,m=e.ReadUInt32(i,o),d=t.GetDimVector(),h=t.GetNVector(),r=d*h,u=0;u<t.GetDimVector();++u)t.SetMin(u,e.ReadFloat32(i,o)),t.SetMax(u,e.ReadFloat32(i,o));if(c=new a.ArithmeticDecoder,C=new a.StaticBitModel,l=new a.AdaptiveBitModel,m-=i.m_count-_,A=0,f=0,o===s.O3DGC_STREAM_TYPE_BINARY&&(p=e.GetBuffer(i,m),i.m_count+=m,c.SetBuffer(m,p),c.StartDecoder(),A=c.ExpGolombDecode(0,C,l),f=c.ExpGolombDecode(0,C,l)),S=new a.AdaptiveDataModel,S.SetAlphabet(f+2),this.m_maxNumVectors<r&&(this.m_maxNumVectors=r,this.m_quantVectors=new Int32Array(this.m_maxNumVectors)),D=this.m_quantVectors,o===s.O3DGC_STREAM_TYPE_ASCII)for(I=0;h>I;++I)for(T=0;d>T;++T)D[T*h+I]=e.ReadIntASCII(i);else for(I=0;h>I;++I)for(T=0;d>T;++T)D[T*h+I]=c.DecodeIntACEGC(S,C,l,A,f);for(T=0;d>T;++T)this.ITransform(D,T*h,h);return this.IQuantize(t.GetVectors(),h,d,t.GetStride(),t.GetMinArray(),t.GetMaxArray(),this.m_params.GetQuantBits()),n
},a}),define("Scene/decompressOpen3DGC",["../ThirdParty/o3dgc"],function(t){"use strict";function e(t,e){return t=0|t,e=0|e,0|Math.ceil(t/e)*e}function r(r,i){var o=new ArrayBuffer(r),n=new t.BinaryStream(i),_=new t.SC3DMCDecoder,m=new t.IndexedFaceSet;_.DecodeHeader(m,n);var a,s,d=0;m.GetNCoordIndex()>0&&(s=3*m.GetNCoordIndex(),m.SetCoordIndex(new Uint16Array(o,d,s)),d+=s*Uint16Array.BYTES_PER_ELEMENT),d=e(d,Float32Array.BYTES_PER_ELEMENT),m.GetNCoord()>0&&(s=3*m.GetNCoord(),m.SetCoord(new Float32Array(o,d,s)),d+=s*Float32Array.BYTES_PER_ELEMENT),m.GetNNormal()>0&&(s=3*m.GetNNormal(),m.SetNormal(new Float32Array(o,d,s)),d+=s*Float32Array.BYTES_PER_ELEMENT);var h=m.GetNumFloatAttributes();for(a=0;h>a;a++)m.GetNFloatAttribute(a)>0&&(s=m.GetFloatAttributeDim(a)*m.GetNFloatAttribute(a),m.SetFloatAttribute(a,new Float32Array(o,d,s)),d+=s*Float32Array.BYTES_PER_ELEMENT);d=e(d,Int32Array.BYTES_PER_ELEMENT);var u=m.GetNumIntAttributes();for(a=0;u>a;a++)m.GetNIntAttribute(a)>0&&(s=m.GetIntAttributeDim(a)*m.GetNIntAttribute(a),m.SetIntAttribute(a,new Int16Array(o,d,s)),d+=s*Int32Array.BYTES_PER_ELEMENT);return _.DecodePlayload(m,n),o}return r}),define("Core/defined",[],function(){"use strict";var t=function(t){return void 0!==t};return t}),define("Core/freezeObject",["./defined"],function(t){"use strict";var e=Object.freeze;return t(e)||(e=function(t){return t}),e}),define("Core/defaultValue",["./freezeObject"],function(t){"use strict";var e=function(t,e){return void 0!==t?t:e};return e.EMPTY_OBJECT=t({}),e}),define("Core/formatError",["./defined"],function(t){"use strict";var e=function(e){var r,i=e.name,o=e.message;r=t(i)&&t(o)?i+": "+o:e.toString();var n=e.stack;return t(n)&&(r+="\n"+n),r};return e}),define("Workers/createTaskProcessorWorker",["../Core/defaultValue","../Core/defined","../Core/formatError"],function(t,e,r){"use strict";var i=function(i){var o,n=[],_={id:void 0,result:void 0,error:void 0};return function(m){var a=m.data;n.length=0,_.id=a.id,_.error=void 0,_.result=void 0;try{_.result=i(a.parameters,n)}catch(s){_.error=s instanceof Error?{name:s.name,message:s.message,stack:s.stack}:s}e(o)||(o=t(self.webkitPostMessage,self.postMessage)),a.canTransferArrayBuffer||(n.length=0);try{o(_,n)}catch(s){_.result=void 0,_.error="postMessage failed with error: "+r(s)+"\n  with responseMessage: "+JSON.stringify(_),o(_)}}};return i}),define("Workers/decompressOpen3DGC",["../Scene/decompressOpen3DGC","./createTaskProcessorWorker"],function(t,e){"use strict";function r(e,r){var i=e.decompressedByteLength,o=e.compressedBuffer,n=t(i,o);return r.push(n),{decompressedArrayBuffer:n}}return e(r)})}();